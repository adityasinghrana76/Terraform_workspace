
# Terraform AWS Get Started Guide (Ubuntu)

This document explains how to install Terraform on Ubuntu, configure AWS CLI, and provision an EC2 instance on AWS using Terraform.

---

## 1. Prerequisites

- Ubuntu 20.04 / 22.04 / 24.04
- AWS Account
- IAM User with programmatic access
- AWS Access Key & Secret Key
- Internet connectivity

---

## 2. Install Required Packages

Update the system and install dependencies:

```bash
sudo apt-get update
sudo apt-get install -y gnupg software-properties-common
````

---

## 3. Install Terraform (Official HashiCorp Repository)

### 3.1 Add HashiCorp GPG Key

```bash
wget -O- https://apt.releases.hashicorp.com/gpg | \
gpg --dearmor | sudo tee /usr/share/keyrings/hashicorp-archive-keyring.gpg > /dev/null
```

Verify the key (optional but recommended):

```bash
gpg --no-default-keyring \
--keyring /usr/share/keyrings/hashicorp-archive-keyring.gpg \
--fingerprint
```

---

### 3.2 Add HashiCorp Repository

```bash
echo "deb [arch=$(dpkg --print-architecture) \
signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] \
https://apt.releases.hashicorp.com \
$(grep -oP '(?<=UBUNTU_CODENAME=).*' /etc/os-release || lsb_release -cs) \
main" | sudo tee /etc/apt/sources.list.d/hashicorp.list
```

---

### 3.3 Install Terraform

```bash
sudo apt update
sudo apt-get install terraform
```

Verify installation:

```bash
terraform -v
```

---

## 4. Enable Terraform Autocomplete (Optional)

```bash
terraform -install-autocomplete
source ~/.bashrc
```

---

## 5. Install & Verify AWS CLI

Check AWS CLI version:

```bash
aws --version
```

If AWS CLI is not installed:

```bash
sudo apt install awscli -y
```

---

## 6. Configure AWS Credentials

```bash
aws configure
```

You will be prompted for:

* AWS Access Key ID
* AWS Secret Access Key
* Default region: `ap-south-1`
* Output format: `json`

Verify configuration:

```bash
aws configure list
```

---

## 7. Project Directory Structure

Create project directory:

```bash
mkdir -p ~/Projects/learn-terraform-get-started-aws
cd ~/Projects/learn-terraform-get-started-aws
```

Final structure:

```
learn-terraform-get-started-aws/
├── main.tf
└── terraform.tf
```

---

## 8. Terraform Configuration Files

### 8.1 `terraform.tf`

Defines Terraform and provider versions.

```hcl
terraform {
  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "~> 5.92"
    }
  }

  required_version = ">= 1.2"
}
```

---

### 8.2 `main.tf`

Creates an EC2 instance using the latest Ubuntu 24.04 AMI.

```hcl
provider "aws" {
  region = "ap-south-1"
}

data "aws_ami" "ubuntu" {
  most_recent = true

  filter {
    name   = "name"
    values = ["ubuntu/images/hvm-ssd-gp3/ubuntu-noble-24.04-amd64-server-*"]
  }

  owners = ["099720109477"] # Canonical
}

resource "aws_instance" "app_server" {
  ami           = data.aws_ami.ubuntu.id
  instance_type = "t3.micro"

  tags = {
    Name = "learn-terraform"
  }
}
```

---

## 9. Terraform Commands Workflow

### 9.1 Format Code

```bash
terraform fmt
```

---

### 9.2 Initialize Terraform

```bash
terraform init
```

---

### 9.3 Validate Configuration

```bash
terraform validate
```

---

### 9.4 Apply Configuration (Create EC2)

```bash
terraform apply
```

Type `yes` when prompted.

---

### 9.5 Verify Resources

```bash
terraform state list
terraform show
```

---

## 10. Destroy Infrastructure

To remove all created AWS resources:

```bash
terraform destroy
```

Type `yes` to confirm.

---

## 11. Summary

* Terraform installed via official HashiCorp repo
* AWS CLI configured
* EC2 instance launched using Ubuntu 24.04 AMI
* Infrastructure managed as code
* Full lifecycle: init → apply → destroy

---

## 12. Next Steps

* Add `variables.tf`
* Use `outputs.tf`
* Configure remote backend (S3 + DynamoDB)
* Use Terraform modules
* Add security groups & key pairs

---












